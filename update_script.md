# Content. Update Script.

Стержнем каждого нового скрипта является сложное дерево переходов (описание на языке UchiGraph).
Каждый шаг в дереве должен быть реализован в коде. Хорошей практикой является создание
для каждого `file.graph` соответсвующего `file.js.coffee` с имплементациями шагов.

Граф можно раскладывать на несколько файлов, так как удобнее программисту. Чисто технически
система берет все файлы `*.graph` из меты скрипта, слепляет их в один большой файл и работает
с ним. Возникает проблема как поддерживать соответсвие кофе-файла и графа.

Для того чтобы решить проблему из предудущего абзаца был создан скрипт
[update_script](https://github.com/uchiru/content/blob/master/update_script).
Его следует запускать из консоли с единственным аргументом в виде ID скрипта. Этот скрипт
обновляет комментарии для всех шагов, создает пропущенные и помечает неиспользующиеся.


### Флоу работы со скриптом `./update_script` (предварительно)

1. Создается первичный граф `id.graph`, достаточный для реализации чернового сценария.
2. В мету добавляется пустой файл `id.coffee.script`.
3. Комит.
4. Запустить ./update_script <id>.
5. С помощью `git diff` проверить, что скрипт сделал предсказуемые вещи.
6. Комит.
7. Модифицирование графа (возможно создание дополнительных файлов с графом).
8. К шагу 4

То есть цель скрипта `./update_script` держать все время в соответствии граф и кофе.
